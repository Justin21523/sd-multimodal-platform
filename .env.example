# .env.example
# SD Multi-Modal Platform - Environment Configuration
# Phase 2: Backend Framework & Basic API Services
# Copy this file to .env and customize the values

# ============================================================================
# API Configuration
# ============================================================================
API_PREFIX=/api/v1
HOST=0.0.0.0
PORT=8000
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080,http://127.0.0.1:3000

# ============================================================================
# Logging Configuration
# ============================================================================
LOG_LEVEL=INFO
LOG_FILE=logs/app.log
ENABLE_REQUEST_LOGGING=true

# ============================================================================
# Hardware Configuration
# ============================================================================
DEVICE=cuda                      # Primary compute device
CUDA_VISIBLE_DEVICES=0          # GPU selection for multi-GPU systems
ENABLE_CPU_OFFLOAD=False         # Memory management for large models
USE_ATTENTION_SLICING=True   # Reduce VRAM usage with minimal speed impact
ENABLE_XFORMERS=true           # Use xformers for memory-efficient attention
TORCH_DTYPE=float16         # Use float16 for reduced memory usage

# ============================================================================
# Model Configuration
# ============================================================================
# Primary model to load on startup: sd-1.5 or sdxl-base
PRIMARY_MODEL=sdxl-base
MODEL_CACHE_DIR=./models/cache

# Model directories (create these directories and download models)
SD_MODEL_PATH=./models/stable-diffusion/sd-1.5
SDXL_MODEL_PATH=./models/stable-diffusion/sdxl
CONTROLNET_MODEL_PATH=./models/controlnet
LORA_MODEL_PATH=./models/lora
VAE_MODEL_PATH=./models/vae
UPSCALE_MODEL_PATH=./models/upscale

# ============================================================================
# Generation Defaults
# ============================================================================
# Image dimensions (SDXL optimal: 1024x1024, SD1.5 optimal: 512x512)
DEFAULT_WIDTH=1024
DEFAULT_HEIGHT=1024
DEFAULT_STEPS=25
DEFAULT_GUIDANCE_SCALE=7.5
DEFAULT_SAMPLER=DPM++ 2M Karras
DEFAULT_SCHEDULER=EulerDiscreteScheduler

# ============================================================================
# Performance Limits
# ============================================================================
# Concurrent processing limits
MAX_WORKERS=1
MAX_BATCH_SIZE=1
MAX_QUEUE_SIZE=100

# Timeouts and limits
REQUEST_TIMEOUT=300
MAX_FILE_SIZE=10485760  # 10MB in bytes

# ============================================================================
# Storage Configuration
# ============================================================================
OUTPUT_PATH=./outputs
ASSETS_PATH=./assets
ENABLE_METADATA_LOGGING=true
KEEP_GENERATIONS_DAYS=7

# ============================================================================
# Security Configuration (Change in production!)
# ============================================================================
SECRET_KEY=your-super-secret-key-change-this-in-production
JWT_EXPIRE_HOURS=24
ENABLE_NSFW_FILTER=true
ENABLE_RATE_LIMITING=true

# ============================================================================
# Feature Flags
# ============================================================================
ENABLE_PROMETHEUS=false
ENABLE_HEALTH_CHECKS=true

# ============================================================================
# Development/Production Environment Specific Settings
# ============================================================================

# For development (local machine)
# DEVICE=cuda
# LOG_LEVEL=DEBUG
# MAX_WORKERS=1

# For production (server deployment)
# DEVICE=cuda
# LOG_LEVEL=INFO
# MAX_WORKERS=2
# ENABLE_PROMETHEUS=true

# For CPU-only deployment
# DEVICE=cpu
# TORCH_DTYPE=float32
# ENABLE_XFORMERS=false

# For low-VRAM systems (8GB or less)
# TORCH_DTYPE=float16
# USE_ATTENTION_SLICING=true
# ENABLE_CPU_OFFLOAD=true
# MAX_BATCH_SIZE=1

# For high-VRAM systems (24GB+)
# TORCH_DTYPE=float16
# MAX_WORKERS=2
# MAX_BATCH_SIZE=4
# ENABLE_CPU_OFFLOAD=false
